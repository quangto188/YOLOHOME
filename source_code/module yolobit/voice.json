{"mode":"block","xmlText":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><block type=\"ai_event_forever\" id=\"476+L,b7`_XJF_cC5H%/\" x=\"-562\" y=\"-437\"><statement name=\"ONSTART\"><block type=\"ai_speech_rec_event\" id=\"dO^uW5F+K..yTCkE-PYe\"><field name=\"language\">vi-VN</field><statement name=\"event_handler\"><block type=\"ai_display_background\" id=\"N0uvR@kg~qS.Wq~Q4hy7\"><value name=\"COLOR\"><shadow type=\"colour_picker\" id=\"/1$A9P8HyCzry9490]`7\"><field name=\"COLOUR\">#ffffff</field></shadow></value><next><block type=\"ai_display_text\" id=\"p9}LEUQq8|hJOxdythdw\"><value name=\"TEXT\"><shadow type=\"text\" id=\"{Nr=!dsBRcl`zK~xV7Qh\"><field name=\"TEXT\">Hello</field></shadow><block type=\"ai_speech_rec_result\" id=\"PkaiZ58HY;h0H~ci8Qy{\"></block></value><value name=\"X\"><shadow type=\"math_number\" id=\"~QW*i]+]83e8E8.CkOJM\"><field name=\"NUM\">100</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"Ld4w!?Maz8xl;|aiB0w3\"><field name=\"NUM\">250</field></shadow></value><next><block type=\"controls_if\" id=\".0xRMK2{#jp`}J^Da`(f\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_operation\" id=\"@%X%XvV`*bQbWTD9B)10\"><field name=\"OP\">AND</field><value name=\"A\"><block type=\"ai_speech_rec_result_check\" id=\"PuV8)I7^23t;h?#]_iu4\"><value name=\"check_values\"><shadow type=\"text\" id=\"sT2oa}?)=)5@+MI.fqw9\"><field name=\"TEXT\">bật, mở</field></shadow></value></block></value><value name=\"B\"><block type=\"ai_speech_rec_result_check\" id=\"`ibnGI2FCJXowB=p1+;Y\"><value name=\"check_values\"><shadow type=\"text\" id=\".rX9O;4n-/(v{4CBljct\"><field name=\"TEXT\">đèn</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"ai_device_send_string\" id=\"J};ir[UIKm+5Uy3)sjTJ\"><value name=\"message\"><shadow type=\"text\" id=\"b-P5qfrjm09DLygnFsf@\"><field name=\"TEXT\">A</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"controls_if\" id=\"$P=Y)Y|b84xL|2x^XptN\"><value name=\"IF0\"><block type=\"logic_operation\" id=\"Dt=.RA_G48vD[za=}*7_\"><field name=\"OP\">AND</field><value name=\"A\"><block type=\"ai_speech_rec_result_check\" id=\"r1K1x5T9;3/.k(,7=jLP\"><value name=\"check_values\"><shadow type=\"text\" id=\"D/|ISx=!n}(Y!dx_oUt#\"><field name=\"TEXT\">tắt</field></shadow></value></block></value><value name=\"B\"><block type=\"ai_speech_rec_result_check\" id=\"v8n/a$~+5^Bp6D|_X/Nw\"><value name=\"check_values\"><shadow type=\"text\" id=\"IWj$X=|n13Tt2ztcD-[5\"><field name=\"TEXT\">đèn</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"ai_device_send_string\" id=\"C%FfnDnxgCLj3%*aGQ5t\"><value name=\"message\"><shadow type=\"text\" id=\"I~T]wC=d#@B.gmw-Ki*,\"><field name=\"TEXT\">B</field></shadow></value></block></statement></block></statement></block></next></block></next></block></statement></block></statement></block></xml>","javascript":"function p5speechRecGotResult() {\n  background('#ffffff');\n  text((p5SpeechRec.resultString.toLowerCase()) , 100, 250);\n  if (new RegExp('bật, mở'.split(\",\").map(function(item) {return item.trim();}).join(\"|\")).test(p5SpeechRec.resultString.toLowerCase()) && new RegExp('đèn'.split(\",\").map(function(item) {return item.trim();}).join(\"|\")).test(p5SpeechRec.resultString.toLowerCase())) {\n    parent.commandUtils.sendTerminalData('A');\n  } else {\n    if (new RegExp('tắt'.split(\",\").map(function(item) {return item.trim();}).join(\"|\")).test(p5SpeechRec.resultString.toLowerCase()) && new RegExp('đèn'.split(\",\").map(function(item) {return item.trim();}).join(\"|\")).test(p5SpeechRec.resultString.toLowerCase())) {\n      parent.commandUtils.sendTerminalData('B');\n    }\n  }\n\n}\n\nfunction p5speechRecOnEnd() {\n  p5SpeechRec.start();\n}\n\nfunction sleep(s) {\n  ms = s * 1000\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n\n\nlet p5SpeechRec = new p5.SpeechRec(\"vi-VN\", p5speechRecGotResult);\np5SpeechRec.onEnd = p5speechRecOnEnd;\n\nfunction preload() {\n\n}\n\nfunction setup() {\n  createCanvas(window.parent.document.getElementById('js-runner-container').offsetWidth-50, window.parent.document.getElementById('js-runner-container').offsetHeight-50);\n    p5SpeechRec.start(); // start listening\n\n}\n\nfunction draw() {\n\n}\n","name":"voice","extensions":[],"device":"ai"}