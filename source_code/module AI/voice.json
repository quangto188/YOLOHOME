{"mode":"block","xmlText":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><block type=\"ai_event_forever\" id=\"476+L,b7`_XJF_cC5H%/\" x=\"-578\" y=\"-584\"><statement name=\"ONSTART\"><block type=\"ai_speech_rec_event\" id=\"7#o[v%c7@^eXWYV.2-x`\"><field name=\"language\">vi-VN</field><statement name=\"event_handler\"><block type=\"ai_display_background\" id=\"kJrofnR*~K{3dkNgqy/X\"><value name=\"COLOR\"><shadow type=\"colour_picker\" id=\"TLwosei1ex_qnH0}DUNA\"><field name=\"COLOUR\">#ffffff</field></shadow></value><next><block type=\"ai_display_text\" id=\"e?4`3Ds.Q8}an]3#v(/j\"><value name=\"TEXT\"><shadow type=\"text\" id=\"bv=IohGTL[NKHb01N;iE\"><field name=\"TEXT\">Hello</field></shadow><block type=\"ai_speech_rec_result\" id=\"a0=bAS}NIOMvu?oTh^fx\"></block></value><value name=\"X\"><shadow type=\"math_number\" id=\"56)s=rp{[))~w-`R,kso\"><field name=\"NUM\">100</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"F!-]$yF0Y{Wh4mOT|gKy\"><field name=\"NUM\">250</field></shadow></value><next><block type=\"controls_if\" id=\"u9L~Q,{um~U::3a%nE14\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_operation\" id=\"++,89@L#kmVPKoJ2ml_#\"><field name=\"OP\">AND</field><value name=\"A\"><block type=\"ai_speech_rec_result_check\" id=\"HSnMcWLCh!^J+h=)rFd8\"><value name=\"check_values\"><shadow type=\"text\" id=\"dKGSMasXPZwbuOST}[^B\"><field name=\"TEXT\">bật,mở</field></shadow></value></block></value><value name=\"B\"><block type=\"ai_speech_rec_result_check\" id=\"=n3_hOarH*]Z`BpusqDQ\"><value name=\"check_values\"><shadow type=\"text\" id=\"3iR2~h$^P1p^G?g%n[tl\"><field name=\"TEXT\">đèn</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"ai_display_text\" id=\")N[zF;czb@@dvp:JU]90\"><value name=\"TEXT\"><shadow type=\"text\" id=\"v7EKD:[?ASrZ!D#U(v:k\"><field name=\"TEXT\">ON</field></shadow></value><value name=\"X\"><shadow type=\"math_number\" id=\"X%fkNbk`uow|#kCDje.S\"><field name=\"NUM\">100</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\";I$)vSpc)-DFuMQZ=(rd\"><field name=\"NUM\">270</field></shadow></value><next><block type=\"ai_device_send_string\" id=\"ZB[,%pPNFz*_;lSNz=X(\"><value name=\"message\"><shadow type=\"text\" id=\"1Ey[WV{55eWLQX|e/BJB\"><field name=\"TEXT\">A</field></shadow></value></block></next></block></statement><statement name=\"ELSE\"><block type=\"controls_if\" id=\":uZX:h]~:}K+YSpo5)iK\"><value name=\"IF0\"><block type=\"logic_operation\" id=\"GSSX_bGl^d:GL4qhbz{0\"><field name=\"OP\">AND</field><value name=\"A\"><block type=\"ai_speech_rec_result_check\" id=\"@nay/ee1Q#3Ll9Gc{.Mf\"><value name=\"check_values\"><shadow type=\"text\" id=\"SHy)fkW+a~qs-3Z8_kdT\"><field name=\"TEXT\">tắt</field></shadow></value></block></value><value name=\"B\"><block type=\"ai_speech_rec_result_check\" id=\"m{eJ/c/+3n!4`5]*uP!r\"><value name=\"check_values\"><shadow type=\"text\" id=\"ylBc*3@[_B]lLO4!hA.)\"><field name=\"TEXT\">đèn</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"ai_display_text\" id=\"1Ap1m3Q;R:y^?=x8Gm,*\"><value name=\"TEXT\"><shadow type=\"text\" id=\"m7E!0r[Z/8@GPk-tAvWm\"><field name=\"TEXT\">OFF</field></shadow></value><value name=\"X\"><shadow type=\"math_number\" id=\"}W}hf:R;_;RVzU_b$c1Q\"><field name=\"NUM\">100</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"mA%6LT4_ZkH1*!i%~B7F\"><field name=\"NUM\">270</field></shadow></value><next><block type=\"ai_device_send_string\" id=\"el`F]3t`7Y?:wzF[`xC;\"><value name=\"message\"><shadow type=\"text\" id=\"xFUX5UE8+4%XsT38FEk*\"><field name=\"TEXT\">B</field></shadow></value></block></next></block></statement></block></statement></block></next></block></next></block></statement></block></statement></block></xml>","javascript":"function p5speechRecGotResult() {\n  background('#ffffff');\n  text((p5SpeechRec.resultString.toLowerCase()) , 100, 250);\n  if (new RegExp('bật,mở'.split(\",\").map(function(item) {return item.trim();}).join(\"|\")).test(p5SpeechRec.resultString.toLowerCase()) && new RegExp('đèn'.split(\",\").map(function(item) {return item.trim();}).join(\"|\")).test(p5SpeechRec.resultString.toLowerCase())) {\n    text('ON' , 100, 270);\n    parent.commandUtils.sendTerminalData('A');\n  } else {\n    if (new RegExp('tắt'.split(\",\").map(function(item) {return item.trim();}).join(\"|\")).test(p5SpeechRec.resultString.toLowerCase()) && new RegExp('đèn'.split(\",\").map(function(item) {return item.trim();}).join(\"|\")).test(p5SpeechRec.resultString.toLowerCase())) {\n      text('OFF' , 100, 270);\n      parent.commandUtils.sendTerminalData('B');\n    }\n  }\n\n}\n\nfunction p5speechRecOnEnd() {\n  p5SpeechRec.start();\n}\n\nfunction sleep(s) {\n  ms = s * 1000\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n\n\nlet p5SpeechRec = new p5.SpeechRec(\"vi-VN\", p5speechRecGotResult);\np5SpeechRec.onEnd = p5speechRecOnEnd;\n\nfunction preload() {\n\n}\n\nfunction setup() {\n  createCanvas(window.parent.document.getElementById('js-runner-container').offsetWidth-50, window.parent.document.getElementById('js-runner-container').offsetHeight-50);\n    p5SpeechRec.start(); // start listening\n\n}\n\nfunction draw() {\n\n}\n","name":"AI","extensions":[],"device":"ai"}